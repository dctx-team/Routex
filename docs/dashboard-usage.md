# Web 控制面板使用指南

Routex 提供了两个版本的 Web 控制面板：

## 🚀 增强版控制面板（推荐）

**访问地址：** `http://localhost:8080/dashboard/enhanced`

### 主要功能

#### 1. 系统监控
- 实时查看系统运行状态
- 监控渠道统计信息
- 查看缓存使用情况
- 显示当前负载均衡策略

#### 2. 渠道管理

##### 添加渠道
1. 点击右上角 "➕ 添加渠道" 按钮
2. 填写渠道信息：
   - **渠道名称**：唯一标识符（必填）
   - **API 类型**：选择 Anthropic 或 OpenAI
   - **Base URL**：API 服务地址（必填）
   - **API Key**：API 密钥（必填）
   - **支持的模型**：每行一个模型名称（可选，留空表示支持所有模型）
   - **优先级**：1-100，数字越小优先级越高
   - **权重**：0-100，用于加权随机策略
   - **状态**：启用或禁用
3. 点击 "保存" 完成创建

##### 编辑渠道
1. 在渠道列表中找到目标渠道
2. 点击 "编辑" 按钮
3. 修��需要变更的字段
4. 点击 "保存" 保存修改

##### 启用/禁用渠道
- 点击渠道旁的 "启用" 或 "禁用" 按钮即可快速切换状态
- 禁用的渠道不会参与负载均衡

##### 删除渠道
1. 点击渠道旁的 "删除" 按钮
2. 在确认对话框中点击 "确定"
3. 渠道将被永久删除（不可恢复）

#### 3. 负载均衡策略切换

在 "⚖️ 负载均衡策略" 卡片中：
1. 从下拉菜单选择目标策略：
   - **优先级策略 (Priority)**：按优先级顺序选择渠道
   - **轮询策略 (Round Robin)**：依次轮流使用各渠道
   - **加权随机 (Weighted Random)**：根据权重随机选择
   - **最少使用 (Least Used)**：选择使用次数最少的渠道
2. 点击 "切换策略" 按钮
3. 系统会立即应用新策略

#### 4. 自动刷新
- 页面数据每 30 秒自动刷新
- 也可以手动点击 "🔄 刷新数据" 按钮立即更新

### 操作提示

所有操作都会显示即时反馈：
- ✅ **绿色提示**：操作成功
- ❌ **红色提示**：操作失败（会显示���误信息）

## 📊 标准版控制面板（只读）

**访问地址：** `http://localhost:8080/dashboard`

标准版控制面板提供：
- 系统状态监控
- 渠道列表查看
- 统计数据展示
- API 端点列表

**注意：** 标准版仅支持数据查看，不支持管理操作。

## 🔧 API 端点

增强版控制面板使用以下 API 端点：

### 渠道管理
- `GET /api/channels` - 获取渠道列表
- `POST /api/channels` - 创建渠道
- `PUT /api/channels/:id` - 更新渠道
- `DELETE /api/channels/:id` - 删除渠道

### 负载均衡
- `GET /api/strategy` - 获取当前策略
- `PUT /api/strategy` - 切换策略

### 系统信息
- `GET /api` - 获取系统状态

## 💡 使用技巧

### 1. 模型配置
支持的模型字段可以精确控制渠道可用的模型，例如：
```
claude-3-5-sonnet-20241022
claude-3-opus-20240229
claude-3-haiku-20240307
```

留空表示该渠道支持所有模型。

### 2. 优先级设置
- 在 Priority 策略下，优先级 1 的渠道会被首选
- 多个相同优先级的渠道会随机选择

### 3. 权重配置
- 权重只在 Weighted Random 策略下生效
- 权重越高，被选中的概率越大
- 权重为 0 表示该渠道不参与加权选择

### 4. 密钥安全
- API Key 在表单中显示为密码类型（隐藏显示）
- 实际存储在服务器端，不会暴露给前端

## 🎨 界面特点

- **渐变紫色主题**：现代美观的视觉设计
- **响应式布局**：自动适配桌面、平板和手机屏幕
- **流畅动画**：模态框、提示等元素都有平滑过渡效果
- **直观操作**：所有功能一目了然，无需学习成本

## 🔄 版本切换

根据需求选择合适的版本：

| 功能 | 增强版 | 标准版 |
|------|--------|--------|
| 查看系统状态 | ✅ | ✅ |
| 查看渠道列表 | ✅ | ✅ |
| 添加渠道 | ✅ | ❌ |
| 编辑渠道 | ✅ | ❌ |
| 删除渠道 | ✅ | ❌ |
| 切换策略 | ✅ | ❌ |
| 启用/禁用渠道 | ✅ | ❌ |

**推荐：** 日常管理使用增强版，对外展示使用标准版。

## 📝 注意事项

1. **删除操作不可恢复**：删除渠道前请仔细确认
2. **策略即时生效**：切换策略后立即应用于新请求
3. **渠道状态同步**：启用/禁用操作会立即影响负载均衡
4. **浏览器兼容性**：建议使用现代浏览器（Chrome、Firefox、Safari、Edge）

## 🆘 故障排除

### 页面无法加载
- 确认 Routex 服务正在运行
- 检查端口 8080 是否被占用
- 查看控制台日志获取详细错误信息

### API 调用失败
- 检查网络连接
- 确认 API 端点可访问
- 查看浏览器开发者工具的 Network 标签

### 数据不更新
- 点击 "刷新数据" 按钮手动更新
- 检查是否有 JavaScript 错误（F12 打开开发者工具）
- 清除浏览器缓存后重试

---

如有问题或建议，欢迎提交 [GitHub Issue](https://github.com/dctx-team/Routex/issues)。
